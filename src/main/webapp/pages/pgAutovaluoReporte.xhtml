<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:c="http://java.sun.com/jsp/jstl/core">

<h:head>
	<title>SBLM</title>
</h:head>
<h:body>
	<ui:composition template="./paginaMaestra.xhtml">
		<ui:define name="content">

			<div class="contenidoPrincipal_FondoPrincipal">
				<div class="contenidoPrincipal_fondoIdentificador">
					<!-- TITULO SUBCONTENIDO -->
					<div class="recaudacion_iconoTitulo"></div>
					<div class="contenidoPrincipal_SubContenido">
						<label class="contenidoPrincipal_lblTituloSubContenido">Autoval&uacute;o</label><br />
						<label class="contenidoPrincipal_lblSubTituloSubContenido">Reportes</label>
					</div>
				</div>



<!-- 				<div class="menuAzul_fondoOpciones"> -->
<!-- 					<div class="menuAzul_submenuOpciones"> -->
<!-- 						<p:commandLink id="idmenuAzul_submenOpc1" -->
<!-- 							styleClass="menuAzul_submenOpc1" oncomplete="tabDerivacion();"> -->
<!-- 							<p:graphicImage -->
<!-- 								value="/resources/images/recaudacion/menuAzul_opc1Submenu.png" -->
<!-- 								alt="Bandeja" title="Supervisor" /> -->
<!-- 						</p:commandLink> -->
<!-- 						<p:commandLink id="idmenuAzul_submenOpc2" -->
<!-- 							styleClass="menuAzul_submenOpc2" oncomplete="tabDerivacion();"> -->
<!-- 							<p:graphicImage -->
<!-- 								value="/resources/images/recaudacion/menuAzul_opc2Submenu.png" -->
<!-- 								alt="Cobranzas" title="Recaudacion" /> -->
<!-- 						</p:commandLink> -->
<!-- 						<p:commandLink id="idmenuAzul_submenOpc3" -->
<!-- 							styleClass="menuAzul_submenOpc3" oncomplete="tabDerivacion();"> -->
<!-- 							<p:graphicImage -->
<!-- 								value="/resources/images/recaudacion/menuAzul_opc3Submenu.png" -->
<!-- 								alt="Arbitrios" title="Autovaluo" /> -->
<!-- 						</p:commandLink> -->

<!-- 					</div> -->
<!-- 					<div class="menuAzul_submenuItems"> -->
<!-- 						<p:commandLink id="idmenuAzul_arbitriosSubmenu" -->
<!-- 							styleClass="menuAzul_arbitriosSubmenu" -->
<!-- 							oncomplete="tabDerivacion();"> -->
<!-- 							<p:graphicImage styleClass="menuAzul_imgsubmenarbitrios" -->
<!-- 								width="22" height="22" -->
<!-- 								value="/resources/images/recaudacion/ico_b.png" alt="arbitrios" -->
<!-- 								title="arbitrios" /> -->
<!-- 							<h:outputText -->
<!-- 								style="float:left;margin-left:5px; margin-top:7px;color:white;" -->
<!-- 								value="Arbitrios" /> -->
<!-- 						</p:commandLink> -->

<!-- 					</div> -->

<!-- 				</div> -->
				<!-- Fondo de Reporte  -->
				<div class="contenidoPrincipal_SubFondo">
					<div class="cobranza_iconoSubTitulo">
						<h:outputText id="arren_lblSubtituloDesc2"
							style="float:left;margin-left:48px; margin-top:18px;font-size:10px;"
							value="Reportes" />
					</div>
					<div id="arren_lblSubtitulo"
						class="contenidoPrincipal_subFondo_lblTitulox">
						<h:outputText style="float:left;margin-left:5px; margin-top:2px;"
							value="Recaudaci&oacute;n/Autoval&uacute;o" />
					</div>
					<p:commandLink id="idTab01Cobranza" styleClass="arren_btnAtendidos">
<!-- 												onclick="funcionTab01Cobranza();"> -->
						<div class="btncentrado">Reporte</div>
					</p:commandLink>
					<div class="contenidoPrincipal_fondo_formulario">
						<div class="contenidoPrincipal_ContenedorBlano">
							<div id="idDivTab03Cobranza" class="cartera_panelPendientes">
								<h:form>
									<div class="contenidoAutovaluoConsultaRegistroComprobante">
										<p:tabView>
											<p:tab title="Upa">
												<h:panelGrid id="grid">
													<h:selectOneRadio
														value="#{autovaluoconsultaMB.tipoReporteSeleccionadoTabUpa}">
<!-- 														<f:selectItem itemLabel="Cancelados y Pendientes" itemValue="1" /> -->
														<f:selectItem itemLabel="Cancelados" itemValue="2" />
<!-- 														<f:selectItem itemLabel="Pendientes" itemValue="3" /> -->
														<f:selectItem itemLabel="Pendientes" itemValue="4" />
<!-- 														<f:selectItem itemLabel="Liquidación con Detalle" itemValue="5" /> -->

														<p:ajax update="grid" />
													</h:selectOneRadio>
												</h:panelGrid>
												<h:panelGrid columns="4"
													style="text-align:center;margin-left:15px;margin-top:15px;">
													<p:remoteCommand name="busquedaAutovaluoArbitrio"
														actionListener="#{autovaluoconsultaMB.obtenerListaArbitrioxUpa}"
														 update="listaArbitrioUpaTabHistorico"/>
													<h:outputText value="Clave de Upa: " />
													<p:inputMask id="clave" mask="**-****-***"
														value="#{autovaluoconsultaMB.claveUpaArbitrio}"
														onkeypress="if (event.keyCode == 13){ busquedaAutovaluoArbitrio();return false;}"
														style="width:90px;text-align:center;fond-size:12px;">
													</p:inputMask>
												</h:panelGrid>
																					
												<p:dataTable id="listaArbitrioUpaTabHistorico"
													var="arbitrio" rows="12" rowKey="#{arbitrio.idarbitrio}"
													value="#{autovaluoconsultaMB.listaAutovaluoArbitrio}"
													selection="#{autovaluoconsultaMB.condicionSeleccionado}"
													style="text-align:center;font-size:11px;margin-top:10px;width:600px"
													emptyMessage="La upa no registra ningun arbitrio "
													scrollWidth="600" styleClass="ui-datatable-hor-scroll">


													<p:ajax event="rowSelectCheckbox"
														listener="#{autovaluoconsultaMB.verificarTipoOpcionElegidaReporteUpa}"
														process="@this" update="listaArbitrioUpaTabHistorico" />
													<p:ajax event="rowUnselectCheckbox" process="@this"
														update="listaArbitrioUpaTabHistorico"
														listener="#{cobranzaConsultaMB.verificarTipoOpcionElegidaReporteUpa}" />


													<p:columnGroup type="header">
														<p:row>
															<p:column rowspan="2" headerText=""
																style="vertical-align: middle;" />
															<p:column rowspan="2" headerText="Estado"
																style="vertical-align: middle;" />
															<p:column rowspan="2" headerText="Nombre/Razón Social"
																style="vertical-align: middle;" />
															<p:column rowspan="2" headerText="Periodo"
																style="vertical-align: middle;" />
															<p:column rowspan="2" headerText="Frecuencia"
																style="vertical-align: middle;" />
															<p:column rowspan="2" headerText="Dirección"
																style="vertical-align: middle;" />
															<p:column rowspan="2" headerText="Monto"
																style="vertical-align: middle;" />
<!-- 															<p:column rowspan="2" headerText="Estado" -->
<!-- 																style="vertical-align: middle;" /> -->
														</p:row>

													</p:columnGroup>

													<p:column selectionMode="single"
														style="width:16px;text-align:center" />
													<p:column>
														<h:outputText value="#{arbitrio.estado}" />
													</p:column>
													<p:column>
														<h:outputText value="#{arbitrio.nombreinquilino}" />
													</p:column>
													<p:column>
														<h:outputText value="#{arbitrio.periodo}" />
													</p:column>
													<p:column>
														<h:outputText value="#{arbitrio.frecuencia}" />
													</p:column>
													<p:column>
														<h:outputText value="#{arbitrio.direccion}" />
													</p:column>
													<p:column>
														<h:outputText value="#{arbitrio.total}">
															<f:convertNumber currencySymbol="S/. "
																groupingUsed="true" locale="en" maxFractionDigits="2"
																type="currency" />
														</h:outputText>
													</p:column>
													<!-- 													<p:column headerText="Estado"> -->
<!-- 														<h:outputText value="#{arbitrio.estado}" /> -->
<!-- 													</p:column> -->

													<f:facet name="footer">
														<p:commandButton style="width:20px;height:20px;"
															actionListener="#{autovaluoconsultaMB.elegirReporteTabUpa('pdf')}"
															icon="ui-icon-arrowthickstop-1-s"
															onclick="PrimeFaces.monitorDownload(start, stop)"
															ajax="false">
															<p:graphicImage
																value="/resources/icons/tipoArchivo/pdf.png" />
															<p:fileDownload value="#{autovaluoconsultaMB.report}"
																contentDisposition="attachment" />
														</p:commandButton>
														<p:spacer width="20" />
													</f:facet>
												</p:dataTable>
											</p:tab>
											
								<p:tab title="Estado Arbitrio">
				          
								<p:accordionPanel activeIndex="99">									
											<p:tab title="Pendientes" >
										   <p:commandButton style="width:20px;height:20px;" actionListener="#{autovaluoconsultaMB.generarReporteArbitrioPendiente('pdf')}"  icon="ui-icon-arrowthickstop-1-s"   onclick="PrimeFaces.monitorDownload(start, stop)">
														 <p:graphicImage value="/resources/icons/tipoArchivo/pdf.png" style="margin-left:20px;margin-top:15px;" />
															<p:fileDownload value="#{autovaluoconsultaMB.report}" contentDisposition="attachment" />
													</p:commandButton>
													<p:commandButton style="width:20px;height:20px;" actionListener="#{autovaluoconsultaMB.generarReporteArbitrioPendiente('xls')}"  icon="ui-icon-arrowthickstop-1-s"   onclick="PrimeFaces.monitorDownload(start, stop)">
														 <p:graphicImage value="/resources/icons/tipoArchivo/xls.png" />
															<p:fileDownload value="#{autovaluoconsultaMB.report}" contentDisposition="attachment" />
													</p:commandButton>
											
											</p:tab>
											<p:tab	 title="Cancelados" >																		
											<h:panelGrid columns="2" cellspacing="5" >
															<p:commandButton style="width:20px;height:20px;" actionListener="#{autovaluoconsultaMB.generarReporteArbitrioCancelado('pdf')}"  icon="ui-icon-arrowthickstop-1-s"   onclick="PrimeFaces.monitorDownload(start, stop)">
																 <p:graphicImage value="/resources/icons/tipoArchivo/pdf.png" style="margin-left:20px;margin-top:15px;" />
																	<p:fileDownload value="#{autovaluoconsultaMB.report}" contentDisposition="attachment" />
															</p:commandButton>
															<p:commandButton style="width:20px;height:20px;" actionListener="#{autovaluoconsultaMB.generarReporteArbitrioCancelado('xls')}"  icon="ui-icon-arrowthickstop-1-s"   onclick="PrimeFaces.monitorDownload(start, stop)">
																 <p:graphicImage value="/resources/icons/tipoArchivo/xls.png" />
																	<p:fileDownload value="#{autovaluoconsultaMB.report}" contentDisposition="attachment" />
															</p:commandButton>
												</h:panelGrid>
											</p:tab>
											
											
								</p:accordionPanel>
								
				        </p:tab>

										</p:tabView>

									</div>

								</h:form>
							</div>


						</div>
					</div>

				</div>


			</div>
		</ui:define>
	</ui:composition>
</h:body>
</html>